(()=>{"use strict";var e={};function t(){const e=new Set,t=new Map,n=(e,n)=>{e.forEach((e=>{t.set(`${e[0]}${e[1]}`,n)}))},r=e=>{t.get(`${e[0]}${e[1]}`)},o=(e,t,n)=>{let r=[],o=+e[0],s=+e[1];if("x"==n){r.push([o-1,s-1]),r.push([o,s-1]),r.push([o+1,s-1]);for(let e=0;e<t;e++)r.push([o-1,s]),r.push([o,s]),r.push([o+1,s]),s+=1;r.push([o-1,s]),r.push([o,s]),r.push([o+1,s])}else{r.push([o-1,s-1]),r.push([o-1,s]),r.push([o-1,s+1]);for(let e=0;e<t;e++)r.push([o,s-1]),r.push([o,s]),r.push([o,s]+1),o+=1;r.push([o,s-1]),r.push([o,s]),r.push([o,s+1])}return r};return{board:t,placeShip:n,getShipOnCords:r,checkCordsForPlacement:(e,s,a,i)=>{t.forEach(((e,n)=>{e==i&&t.delete(n)}));let l=+e[0],c=+e[1];if(a=+a,l>9||c>9||l<0||c<0)throw new Error;let d=[],h=!1;if(h=((e,n,r)=>{let s=o(e,n,r);for(let e=0;e<s.length;e++)if(null!=t.get(`${s[e][0]}${s[e][1]}`))return!1;return!0})(e,a,s),"x"==s){if(c+a-1>9)throw new Error;console.log("x-axis condition passed");for(let e=0;e<a;e++){if(null!=r([l,c+e]))throw new Error;d.push([l,c+e])}}else{if(l+a-1>9)throw new Error;for(let e=0;e<a;e++){if(null!=r([l+e,c]))throw new Error;d.push([l+e,c])}}return 1==h&&n(d,i),console.log(t),h},fireAt:function(n,r){let s=`${n[0]}${n[1]}`;if(0==e.has(s)){e.add(s);let n=t.get(s);if(null!=n){let t=r.getShipList();console.log(this.shipFunction),t[n].hit(),1==t[n].isSunk()&&(o(t[n].start,t[n].length,t[n].axis).forEach((t=>{e.add(`${t[0]}${t[1]}`)})),delete t[n])}}return t.delete(s)}}}function n(){let e={};const t=function(e){return{length:e,hit_No:0,sunk:!1,hit:function(){if(!(this.hit_No<this.length))return!1;++this.hit_No},isSunk:function(){return this.length==this.hit_No&&(this.sunk=!0),this.sunk}}};return{allShips:e,newShip:t,addShipToAllShips:function(n,r,o){let s=Object.keys(e).length,a=t(n);return a.axis=r,a.start=o,e[`ship${s+1}`]=a,a},getShipList:function(){return e}}}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var r=n.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&!t;)t=r[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),t(),n();const r=e.p+"c78c01c43c0ba85570a5.png",o=e.p+"a3b6360eda21356c0fbe.png",s=e.p+"9746a75c953a7b0f73bd.png",a=e.p+"57726935e940a806039a.png",i=e.p+"94c378ac644bc02dff41.png",l=t(),c={battleship:r,carrier:o,destroyer:s,patrol_boat:a,submarine:i},d=document.querySelector(".how-to-play-button"),h=document.querySelector("main");console.log(d),d.addEventListener("click",(()=>{document.querySelector("#how-to-play-dialog").showModal()}));const p=function(e=!1){const t=document.createElement("div");t.className="ship-board";for(let n=0;n<10;n++)for(let r=0;r<10;r++){const o=document.createElement("div");o.className="cell",o.draggable=!1,o.dataset.row=n,o.dataset.col=r,o.style.position="relative",1==e&&(o.addEventListener("dragenter",(function(e){this.classList.add("over")})),o.addEventListener("dragover",(function(e){return e.preventDefault(),!1})),o.addEventListener("dragleave",(function(e){this.classList.remove("over")})),o.addEventListener("drop",(function(e){this.classList.remove("over"),e.preventDefault();try{const t=e.dataTransfer.getData("text/html"),n=document.querySelector(`#${t}`);if(l.checkCordsForPlacement([e.target.dataset.row,e.target.dataset.col],"x",n.dataset.len,`${t}`)){const t=document.querySelector(".ships-container");console.log(t.children.length),console.log("akjdflakj"),0==t.children.length&&(document.querySelector(".game-start-button").disabled=!1),e.target.appendChild(n)}}catch(e){console.log(e)}}))),t.appendChild(o)}return t}(!0),u=document.createElement("div");u.className="player-ship-deploy-modal";const f=document.createElement("div");f.className="ship-grid-container";const g=document.createElement("div");function m(e){this.style.opacity="0.4",e.dataTransfer.effectAllowed="move",console.log(this.id),e.dataTransfer.setData("text/html",this.id)}function v(){this.style.opacity="1"}g.className="ships-container";let y=[["carrier",5],["battleship",4],["destroyer",3],["submarine",3],["patrol_boat",2]];for(let e=0;e<5;e++){const t=document.createElement("img");t.style.width=50*y[e][1]-10+"px",t.style.cursor="move",t.style.zIndex=2,t.style.position="relative",t.draggable=!0,t.src=c[y[e][0]],t.alt=`${y[e][0]}-placeholder`,t.className="ship",t.dataset.len=y[e][1],t.id=y[e][0],t.addEventListener("dragstart",m),t.addEventListener("dragend",v),g.appendChild(t)}const b=document.createElement("div");b.className="ship-deploy-grid-container";const w=document.createElement("span");w.textContent="Place your ships:",f.appendChild(w),f.appendChild(g);const E=document.createElement("div");E.className="ship-deploy-grid",b.appendChild(E),E.appendChild(p),u.appendChild(f),u.appendChild(b),h.appendChild(u);const S=document.createElement("button");S.textContent="Start",S.type="button",S.disabled=!0,S.className="game-start-button",h.appendChild(S),t(),n()})();
//# sourceMappingURL=main.22c6f198e74a72f3fd21.js.map